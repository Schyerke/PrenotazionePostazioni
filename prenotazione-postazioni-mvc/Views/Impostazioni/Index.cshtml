@{
    ViewData["Title"] = "Impostazioni";

    ImpostazioniViewModel ViewModel = (ImpostazioniViewModel) Model;

}

<script>
    function changeState(number) {
        $.ajax({
            type: "POST",
            url: "Impostazioni/ChangeStateTab",
            data: { "number": number }
        });
    }
</script>

<div class="d-flex flex-column flex-shrink-0 p-3 bg-light position-fixed" style="width: 280px; height: 100%; border: 0.1px solid darkorange !important">
        <div class="nav flex-column mb-auto nav-pills darkorange" id="options-pills-tab" role="tablist" aria-orientation="vertical">
            <a class="nav-link-1" id="options-pills-covid-tab" data-toggle="pill" href="#options-pills-covid" role="tab" aria-controls="options-pills-covid" aria-selected="false" onclick="changeState(0)">Covid</a>
            <a class="nav-link-1" id="options-pills-festivita-tab" data-toggle="pill" href="#options-pills-festivita" role="tab" aria-controls="options-pills-festivita" aria-selected="false" onclick="changeState(1)">Festività</a>
            <a class="nav-link-1" id="options-pills-presenze-tab" data-toggle="pill" href="#options-pills-presenze" role="tab" aria-controls="options-pills-presenze" aria-selected="false" onclick="changeState(2)">Presenze</a>
        </div>
    </div>
<div class="tab-content" id="options-pills-tabContent">
<div class="tab-pane fade" id="options-pills-covid" role="tabpanel" aria-labelledby="options-pills-covid-tab">
                
    <div class="container mt-4 ml-21 position-fixed piantina-div">
        <img src="img/piantina.png" usemap="#image-map">          
        <map name="image-map">
            <area alt="Contabilità" title="Contabilità" coords="44,47,140,45,143,132,38,148" shape="poly">
            <!--<area alt="s2" title="s2" coords="148,155,182,161,182,122,310,119,312,39,148,40" shape="poly">
            <area alt="s3" title="s3" coords="185,161,185,127,300,126,300,175" shape="poly">
            <area alt="s4" title="s4" coords="306,126,344,128,344,182,306,177" shape="poly">
            <area alt="s5" title="s5" coords="316,117,342,117,344,101,388,98,389,39,318,42,317,62" shape="poly">
            <area alt="s6" title="s6" coords="349,183,390,189,391,111,350,110" shape="poly">.-->
            <!--<area alt="Finanze" title="Finanze" coords="400,40,484,41,484,107,401,110" shape="poly">-->
            <area alt="Bansky" title="Bansky" coords="398,118,488,119,486,204,398,193" shape="poly">
            <area alt="OpenSpace #1" title="OpenSpace #1" coords="491,40,706,64,708,145,492,123" shape="poly">
            <area alt="OpenSpace #2" title="OpenSpace #2" coords="492,207,704,231,704,147,492,126" shape="poly">
            <!--<area alt="s10" title="s10" coords="544,225,598,232,595,265,540,261" shape="poly">
            <area alt="s11" title="s11" coords="606,233,660,242,655,275,600,266" shape="poly">
            <area alt="s12" title="s12" coords="588,310,705,330,708,495,588,495" shape="poly">-->
            <area alt="Sviluppo" title="Sviluppo" coords="480,292,578,311,577,501,478,506" shape="poly">
            <area alt="Assistenza" title="Assistenza" coords="357,494,456,498,450,291,371,293,360,327" shape="poly">
            <!--<area alt="s15" title="s15" coords="43,246,134,260,135,376,122,383,46,384" shape="poly">
            <area alt="s16" title="s16" coords="43,399,125,397,147,415,149,508,52,509" shape="poly">
            <area alt="s17" title="s17" coords="161,508,247,508,248,403,178,403,160,417" shape="poly">-->
            <area alt="Commerciale" title="Commerciale" coords="262,405,301,385,344,382,347,506,259,507" shape="poly">
            <area alt="Meeting" title="Meeting" coords="207,251,230,236,259,225,278,223,301,228,318,241,328,267,324,291,316,308,301,327,285,340,262,351,236,359,198,352,186,339,180,324,180,306,186,281" shape="poly">
        </map>
    </div>
            
    <div class="container mt-4 ml-70 position-fixed room-info-div">
        <h1>@ViewModel.CapienzaViewModel.GetStanza()</h1>
        <br>
        <h5>Capienza</h5>
        <input type="number" id="capienza" name="capienza" min="1" max="10" style="width:17vw" value="@ViewModel.CapienzaViewModel.Capienza">
        <br><br>
        <input type="button" class="btn btn-primary bg-darkorange bd-darkorange" id="conferma" value="Conferma"></input>
    </div>
</div>
            
<div class="tab-pane fade" id="options-pills-festivita" role="tabpanel" aria-labelledby="options-pills-festivita-tab">
    <div class="container mt-4 ml-21 position-fixed calendar-div-alt">
        <div class="calendar">
            <div class="head">
                <ul class="d-flex align-items-center justify-content-center">
                    <li><img class="item item-img" src="img/left.png" alt="left" onclick="prevMonth()"></li>
                    <li><a class="item" id="month-year"></a></li>
                    <li><img class="item item-img" src="img/right.png" alt="right" onclick="nextMonth()"></li>
                </ul>
            </div>
            <div class="body">
                <table>
                    <tr>
                        <th>Lun</th>
                        <th>Mar</th>
                        <th>Mer</th>
                        <th>Gio</th>
                        <th>Ven</th>
                        <th>Sab</th>
                        <th>Dom</th>
                    </tr>
                    <tr>
                        <td id="0-0">1</td>
                        <td id="1-0">2</td>
                        <td id="2-0">3</td>
                        <td id="3-0">4</td>
                        <td id="4-0">5</td>
                        <td id="5-0">6</td>
                        <td id="6-0">7</td>
                    </tr>
                    <tr>
                        <td id="0-1">8</td>
                        <td id="1-1">9</td>
                        <td id="2-1">10</td>
                        <td id="3-1">11</td>
                        <td id="4-1">12</td>
                        <td id="5-1">13</td>
                        <td id="6-1">14</td>
                    </tr>
                    <tr>
                        <td id="0-2">15</td>
                        <td id="1-2">16</td>
                        <td id="2-2">17</td>
                        <td id="3-2">18</td>
                        <td id="4-2">19</td>
                        <td id="5-2">20</td>
                        <td id="6-2">21</td>
                    </tr>
                    <tr>
                        <td id="0-3">22</td>
                        <td id="1-3">23</td>
                        <td id="2-3">24</td>
                        <td id="3-3">25</td>
                        <td id="4-3">26</td>
                        <td id="5-3">27</td>
                        <td id="6-3">28</td>
                    </tr>
                    <tr>
                        <td id="0-4">29</td>
                        <td id="1-4">30</td>
                        <td id="2-4">31</td>
                        <td id="3-4">1</td>
                        <td id="4-4">2</td>
                        <td id="5-4">3</td>
                        <td id="6-4">4</td>
                    </tr>
                    <tr>
                        <td id="0-5">29</td>
                        <td id="1-5">30</td>
                        <td id="2-5">31</td>
                        <td id="3-5">1</td>
                        <td id="4-5">2</td>
                        <td id="5-5">3</td>
                        <td id="6-5">4</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <script>
        loadCalendar();
    </script>
    <div class="container mt-4 ml-50 position-fixed calendar-info-div">
        <h1>@ViewModel.FestivitaViewModel.GetFestaSelezionata()</h1>
        <br>
        <div>
            <button class="btn btn-primary bg-darkorange bd-darkorange" type="button" id="festabutton" value="Imposta come festività" onclick="festaButton()">Imposta come festività</button>
        </div>
        <br>
        <ul id="lista-feste"></ul>
    </div>
</div>
<div class="tab-pane fade" id="options-pills-presenze" role="tabpanel" aria-labelledby="options-pills-presenze-tab">
    <div class="container mt-4 ml-21 position-fixed calendar-div-alt">
        <div class="calendar">
            <div class="head">
                <ul class="d-flex align-items-center justify-content-center">
                    <li><img class="item item-img" src="img/left.png" alt="left-1" onclick="prevMonth1()"></li>
                    <li><a class="item" id="month-year-1"></a></li>
                    <li><img class="item item-img" src="img/right.png" alt="right-1" onclick="nextMonth1()"></li>
                </ul>
            </div>
            <div class="body">
                <table>
                    <tr>
                        <th>Lun</th>
                        <th>Mar</th>
                        <th>Mer</th>
                        <th>Gio</th>
                        <th>Ven</th>
                        <th>Sab</th>
                        <th>Dom</th>
                    </tr>
                    <tr>
                        <td id="0-01">1</td>
                        <td id="1-01">2</td>
                        <td id="2-01">3</td>
                        <td id="3-01">4</td>
                        <td id="4-01">5</td>
                        <td id="5-01">6</td>
                        <td id="6-01">7</td>
                    </tr>
                    <tr>
                        <td id="0-11">8</td>
                        <td id="1-11">9</td>
                        <td id="2-11">10</td>
                        <td id="3-11">11</td>
                        <td id="4-11">12</td>
                        <td id="5-11">13</td>
                        <td id="6-11">14</td>
                    </tr>
                    <tr>
                        <td id="0-21">15</td>
                        <td id="1-21">16</td>
                        <td id="2-21">17</td>
                        <td id="3-21">18</td>
                        <td id="4-21">19</td>
                        <td id="5-21">20</td>
                        <td id="6-21">21</td>
                    </tr>
                    <tr>
                        <td id="0-31">22</td>
                        <td id="1-31">23</td>
                        <td id="2-31">24</td>
                        <td id="3-31">25</td>
                        <td id="4-31">26</td>
                        <td id="5-31">27</td>
                        <td id="6-31">28</td>
                    </tr>
                    <tr>
                        <td id="0-41">29</td>
                        <td id="1-41">30</td>
                        <td id="2-41">31</td>
                        <td id="3-41">1</td>
                        <td id="4-41">2</td>
                        <td id="5-41">3</td>
                        <td id="6-41">4</td>
                    </tr>
                    <tr>
                        <td id="0-51">29</td>
                        <td id="1-51">30</td>
                        <td id="2-51">31</td>
                        <td id="3-51">1</td>
                        <td id="4-51">2</td>
                        <td id="5-51">3</td>
                        <td id="6-51">4</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <script>
        loadCalendar1();
    </script>
    <div class="container mt-4 ml-50 position-fixed calendar-info-div">
        <h1 id="day-sel-2">Seleziona una data</h1>
        <br>
        <div class="btn-collapse">
            <a data-toggle="collapse" href="#presenti" role="button" aria-expanded="false" aria-controls="collapseExample">
                Persone presenti
            </a>
        </div>
        <div>
            <div class="collapse" id="presenti">
                <div class="card card-body person-div">
                    <ul id="lista-presenti"></ul>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<script>

    let stateView = @ViewModel.StateTab;

    let selecPillsTab = [
        '#options-pills-covid-tab', '#options-pills-festivita-tab', '#options-pills-presenze-tab',
        '#options-pills-covid', '#options-pills-festivita', '#options-pills-presenze'
    ];

    for (let i = 0; i < selecPillsTab.length; i++) {
        if (i > 2)
            $(selecPillsTab[i]).removeClass('show');
        $(selecPillsTab[i]).removeClass('active');
    }

    $(selecPillsTab[stateView]).addClass('active');
    $(selecPillsTab[stateView+3]).addClass('active show');


</script>
        <script src="js/jquery.rwdImageMaps.min.js"></script>
<script>

    let festaSelezionata = new Date(@ViewModel.FestivitaViewModel.GiornoSelezionato.Year,(@ViewModel.FestivitaViewModel.GiornoSelezionato.Month-1),@ViewModel.FestivitaViewModel.GiornoSelezionato.Day)
    //let PSelezionata = new Date(@ViewModel.FestivitaViewModel.GiornoSelezionato.Year,(@ViewModel.FestivitaViewModel.GiornoSelezionato.Month-1),@ViewModel.FestivitaViewModel.GiornoSelezionato.Day)

    if (festaSelezionata.getFullYear() !== 1901) {
        goDate(festaSelezionata);
        clickCalendarFest(getIdDay(@ViewModel.FestivitaViewModel.GiornoSelezionato.Day));
        selectDayFest(festaSelezionata);
    }
        

    $(document).ready(function(e) {
        $('area').on('click', function (event) {
                
            $.ajax({
                type: "POST",
                url: "Impostazioni/SelectRoom",
                data: { "stanza": event.target.alt }
            }).done(function() {
                window.location.reload();
            });

        });

        $('td').on('click', function (event) {
                
            if (isValidDay(event.target.id))
                if (event.target.id.length === 3) //L'id feste è lungo 3 caratteri
                    $.ajax({
                        type: "POST",
                        url: "Impostazioni/SelectFesta",
                        data: { "year": date.getFullYear(), "month": date.getMonth(), "day": $('#'.concat(event.target.id)).text() }
                    }).done(function() {
                        window.location.reload();
                    });

        });

        

    });
</script>
